---
title: "Web Scrapping"
format: html
editor: visual
---

```{r}
library(rvest)
library(dplyr)
library(stringr)

get_stories_page <- function(page_url) {
  tryCatch({
    page <- read_html(page_url)
    
    # Ajusta este selector con el correcto de la página
    stories_nodes <- html_nodes(page, ".story-content") 
    
    stories <- html_text(stories_nodes, trim = TRUE)
    return(stories)
  }, error = function(e) {
    message(paste("Error en la página:", page_url))
    return(character(0)) # devuelve vector vacío en error para continuar el loop
  })
}

base_url <- "https://www.yourghoststories.com/page/"

all_stories <- c()
num_pages <- 50

for (i in 1:num_pages) {
  print(paste("Extrayendo página:", i))
  url <- paste0(base_url, i)
  stories <- get_stories_page(url)
  all_stories <- c(all_stories, stories)
  Sys.sleep(1)
}

length(all_stories)
head(all_stories, 5)

```

